=== User Story: Create Customer Employee

[source,gherkin]
----
Feature: Create Customer Employee
  As an administrator
  I want to add employees to a customer organization
  So that they can manage security systems for their company

  Scenario: Successfully create an employee as admin
    Given I am authenticated as a user with "REALGUARDIO_ADMIN" role
    And a customer exists with ID 123
    When I submit a request to create an employee with name "John Doe" and userId "john.doe" for customer 123
    Then a new employee is created with the name "John Doe" and userId "john.doe"
    And I receive a 201 Created response with the employee ID
    And a CustomerEmployeeCreated event is published to Kafka
    And the employee is synchronized to Oso Cloud as a CustomerEmployee actor

  Scenario: Attempt to create employee without admin role
    Given I am authenticated as a user with "REALGUARDIO_CUSTOMER_EMPLOYEE" role
    And a customer exists with ID 123
    When I submit a request to create an employee for customer 123
    Then I receive a 403 Forbidden response
    And no employee is created

  Scenario: Attempt to create duplicate employee
    Given I am authenticated as a user with "REALGUARDIO_ADMIN" role
    And a customer exists with ID 123
    And an employee already exists with userId "john.doe" for customer 123
    When I submit a request to create an employee with userId "john.doe" for customer 123
    Then I receive a 409 Conflict response
    And the error message indicates "Employee already exists"

  Scenario: Attempt to create employee for non-existent customer
    Given I am authenticated as a user with "REALGUARDIO_ADMIN" role
    When I submit a request to create an employee for customer 999
    Then I receive a 404 Not Found response
    And the error message indicates "Customer not found"
----
